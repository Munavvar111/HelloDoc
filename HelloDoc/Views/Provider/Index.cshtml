
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout5.cshtml";
}



<partial name="ToasterPartialView"></partial>
@section scripts{
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

}
<style>
    .btn span.d-none {
        display: none;
    }

    .btn:hover span.d-none {
        display: inline !important;
    }
</style>
<div class="container-fluid px-4 text-center py-4 ">
    <ul class=" nav gx-5 row  gy-4 mt-0 row row-cols-2 row-cols-lg-4 g-2 g-lg-3">

        <li class="col  text-start  px-2" role="presentation">
            <a class="btn w-100 text-start border-0 Status-btn" id="statuslink1">
                <div class="py-2  d-flex fs-5 Status-btn-text ">New</div>
                <h4 class="fw-bolder ps-1 pb-2 Status-Count" id="newcount"></h4>
            </a>
            <div id="triangle1" class="triangle"></div>
        </li>
        <li class="col  text-primary text-start px-2" role="presentation">
            <a class="btn text-decoration-none text-primary w-100 text-start shadow-none border-0 Status-btn" id="statuslink2">
                <div class="py-2  d-flex fs-5 Status-btn-text">Pending</div>
                <h4 class="fw-bolder ps-1 pb-2 Status-Coun"></h4>
            </a>
            <div id="triangle2" class="triangle" style="display: none;"></div>
        </li>
        <li class="col  text-success text-start position-relative px-2" role="presentation">
            <a class="btn text-decoration-none  text-success w-100 text-start shadow-none border-0 Status-btn" id="statuslink3">
                <div class="py-2 d-flex fs-5 Status-btn-text">Active</div>
                <h4 class="fw-bolder ps-1 pb-2 Status-Coun"></h4>
            </a>
            <div id="triangle3" class="triangle" style="display: none;"></div>
        </li>
        <li class="col  text-danger text-start  px-2" role="presentation">
            <a class="btn text-decoration-none  text-danger w-100 text-start shadow-none border-0 Status-btn" id="statuslink4">
                <div class="py-2 d-flex fs-5 Status-btn-text">Conclude</div>
                <h4 class="fw-bolder ps-1 pb-2 Status-Coun"></h4>
            </a>
            <div id="triangle4" class="triangle " style="display: none;"> </div>
        </li>
      

    </ul>
</div>
<div class="mt-3 mt-md-5 d-flex-column d-sm-flex justify-content-between align-items-center">
    <div class="">
        <p class="patient_text_size fw-bolder mx-3 fs-3">Patients<span class="text-primary" id="statuschange"></span></p>
    </div>
    <div class="">
        <a class="btn btn-info text-white" data-bs-toggle="modal" data-bs-target="#SendLink">
            <i class="bi bi-send  me-md-2"></i><span class="d-none d-lg-inline">Send Link</span>
        </a>
        <a class="btn btn-info  text-white" asp-action="CreateRequest" asp-controller="Provider">
            <i class="bi bi-pencil-square me-md-2"></i><span class="d-none d-lg-inline">
                Create
                Requests
            </span>
        </a>
        
    </div>
</div>

<div class="row mt-4 mb-4 container-fluid">
    <div class="col-xl-3 col-md-6 col-12 mb-2">
        <div class="input-group input-group-height">
            <i class="bi bi-search text-muted position-absolute" style="padding-top: 10px; padding-left: 10px;"></i>
            <input class="form-control" type="search" placeholder="Search Patients"
                   aria-label="Search" id="searchInput">
        </div>
    </div>
    <div class="col-xl-3 col-md-6 col-12 mb-2">
            </div>

    
    <div class="col-xl-6 col-md-12 d-xl-flex justify-content-xl-end  mb-2 justify-content-center fw-bold">
        <div class="d-flex flex-wrap  gap-2">
            <div class="col-auto mb-2 d-none d-lg-block filter-item mx-4" data-value="">
                <button type="button" class="btn border-dark-subtle fw-bold">All</button>
            </div>
            <div class="col-auto mb-2 filter-item mx-md-4 d-flex d-flex flex-md-row flex-column filterByType" data-value="1">
                <i class="bi bi-circle-fill " style="color: #3ecc4e;"></i><span class="">Patient</span>
            </div>
            <div class="col-auto mb-2 filter-item mx-md-4 d-flex d-flex flex-md-row flex-column filterByType" data-value="2">
                <i class="bi bi-circle-fill" style="color: #FFD43B;"></i><span class="">Family</span>

            </div>
            <div class="col-auto mb-2 filter-item mx-md-4 d-flex d-flex flex-md-row flex-column filterByType" data-value="3">
                <i class="bi bi-circle-fill" style="color: #d049b7;"></i><span class="">Business</span>
            </div>
            <div class="col-auto mb-2 filter-item mx-md-4 d-flex flex-md-row flex-column filterByType" data-value="4">
                <i class="bi bi-circle-fill" style="color: #3c5bd7;"></i><span class="">Concierge</span>
            </div>
        </div>
    </div>
</div>
<div id="partialContainer">
</div>
<partial name="SendAgreement"></partial>
<partial name="TransferCaseProvider"></partial>
<partial name="EncounterProvidermodal"></partial>
<partial name="RequestToAdminPartial"></partial>
<partial name="../Admin/EncounterPdfModal"></partial>
<partial name="../Admin/SendLinkModal"></partial>

<div id="loader" class="loader"></div>
<div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
    $(document).ready(function () {
        $('#assigncase').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget);
            console.log(button)
            var recipient = button.data('bs-requestid');
            console.log(recipient);
            var status = button.data('bs-status');

            var modal = $(this);
            modal.find('#requestIdInputCancel1').val(recipient);
            modal.find('#regionid').val('');
            modal.find('#description').val('');
            modal.find('#physicianDropdown').val("");
            var validator = $("#assigncase").validate(); // Assuming your form has ID "cancelCaseForm"
            validator.resetForm();
        });
        $('#assigncase').on('hidden.bs.modal', function () {
            console.log("hidden")
            $('#assigncaseform').each(function () {
                this.reset();
            })

        });


    });
</script>
<script>
    $(document).ready(function () {
        $('#EncounterProvidermodal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget);
            console.log(button)
            var recipient = button.data('bs-requestid');
            console.log(recipient);
            var status = button.data('bs-status');

            var modal = $(this);
            modal.find('#requestidHouseCall').val(recipient);
            modal.find('#requestidConsult').val(recipient);
            
        });
       


    });
</script>
<script>
    $(document).ready(function () {

        $('#ClearModal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget);
            console.log(button)
            var recipient = button.data('bs-requestid');
            console.log(recipient);
            var status = button.data('bs-status');

            var modal = $(this);
            modal.find('#ClearCaseModal').val(recipient);
            var validator = $("#ClearModal").validate(); // Assuming your form has ID "cancelCaseForm"
            validator.resetForm();
        });


    });


</script>

<script>
    $(document).ready(function () {

        $('#transfercase').on('show.bs.modal', function (event) {

            var button = $(event.relatedTarget);
            console.log(button)
            var recipient = button.data('bs-requestid');
            console.log(recipient);
            var modal = $(this);
            modal.find('#requestIdInputTransfer').val(recipient);
            var validator = $("#transfercase").validate(); // Assuming your form has ID "cancelCaseForm"
            validator.resetForm();
        });
        $('#transfercase').on('hidden.bs.modal', function () {
            console.log("hidden")
            $('#transformcase').each(function () {
                this.reset();
            })

        });
    });


</script>


<script>
    $(document).ready(function () {
        
        $('#transfercaseprovider').on('show.bs.modal', function (event) {
            console.log("block")
            var button = $(event.relatedTarget);
            console.log(button)
            var recipient = button.data('bs-requestid');
            var modal = $(this);
            
            console.log(recipient);
            modal.find('#requestIdInputTransferProvider').val(recipient);
            
        });

        $('#TransferCaseProvider').on('hidden.bs.modal', function () {

            $('#transferproviderCaseForm').each(function () {
                this.reset();
            })

        });

    });

</script>

<script>
    $(document).ready(function () {
        $('#sendagrrement').on('show.bs.modal', function (event) {
            console.log("block")
            var button = $(event.relatedTarget);
            console.log(button)
            var recipient = button.data('bs-requestid');
            var email = button.data('bs-email');
            var phoneno = button.data('bs-phoneno');
            var requesttyoeid = button.data('bs-requesttypeid');
            var modal = $(this);
            modal.find('#patientagree').html('fkdlsjfl')
            modal.find('#agreementemail').val(email)
            modal.find('#agreementphoneno').val(phoneno)
            modal.find('#requestIdInputAgreement').val(recipient);
        });
        $('#sendagrrement').on('hidden.bs.modal', function () {

            $('#blockCaseForm').each(function () {
                this.reset();
            })
        });
    });
</script>
<script>
    $(document).ready(function () {
        $('#finalizedModal').on('show.bs.modal', function (event) {
            const button = $(event.relatedTarget); // Button that triggered the modal
            const requestId = button.data('requestid');
            var modal = $(this);
            modal.find('#requestiddownload').val(requestId)

        });
    });
</script>
<script>
    $(document).ready(function () {

        $("#exportAllData").click(function () {
            var currentStatus = JSON.parse(localStorage.getItem("currentStatus"));
            var currentStatusString = ""
            currentStatusString = currentStatus.join(","); // Convert array to comma-separated string
            console.log(currentStatusString)
            // Update the link's href with query string parameters
            var baseUrl = $(this).attr("href").split("?")[0];

            $(this).attr("href", baseUrl + "?currentStatus=" + currentStatusString);
        });
    });
</script>

<script>
    $(document).ready(function () {
        $('#RequestToAdminEditProfile').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget);
            console.log(button)
            var recipient = button.data('bs-physicianid');
           

            var modal = $(this);
            modal.find('#requestIdToEditProfile').val(recipient);
          
        });
        $('#RequestToAdminEditProfile').on('hidden.bs.modal', function () {
            console.log("hidden")
            $('#requestadminforedit').each(function () {
                this.reset();
            })

        });


    });
</script>