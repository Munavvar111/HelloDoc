@model List<DataAccessLayer.CustomModel.PatientHistoryVM>
@{
    ViewData["Title"] = "PatientRecords";
    Layout = "~/Views/Shared/_Layout4.cshtml";
}

<div class="container mt-3">
	
	<div class="d-flex justify-content-between my-3">
		<div class="d-flex">
			<span class="fs-2 text-muted fw-bold">Patient Records</span>
		</div>
		<div class="d-flex justify-content-end">
			<button class="btn btn-outline-info" onclick="window.history.back();">
				<i class="bi bi-chevron-left text-white	"></i>Back
			</button>
		</div>
	</div>
		<div class=" mt-4 mb-border-0">
			<table class="table table-hover">
				<thead class="table-light">
					<tr>
						<th scope="col">Clint</th>
						<th scope="col">Created Date</th>
						<th scope="col">Conformation</th>
						<th scope="col">Providor Name</th>
						<th scope="col">Conclude Date</th>
						<th scope="col">Status</th>
						<th scope="col">Final Report</th>
						<th scope="col">Actions</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var item in Model)
					{
						<tr>
							<td scope="row">
								@item.ClientName
							</td>
							<td scope="row">@item.CreatedDate</td>
							<td scope="row">@item.ConfirmationNumber</td>
							<td scope="row">@item.ProvideName</td>
							<td scope="row">@item.ConcludeDate</td>
							<td scope="row">
								@if (item.Status == 1)
								{
									<span>New</span>
								}
								@if (item.Status == 2)
								{
									<span>Pending</span>
								}
								@if (item.Status == 4 || item.Status == 5)
								{
									<span>Active</span>
								}
								@if (item.Status == 6)
								{
									<span>Conclude</span>
								}
								@if (item.Status == 3 || item.Status == 7 || item.Status == 8)
								{
									<span>To Close</span>
								}
								@if (item.Status == 9)
								{
									<span>Unpaid</span>
								}
							</td>
							<td>
								@if (item.IsFinalize == true)
								{
								<a asp-action="GeneratePDF" asp-route-requestid="@item.RequestId" class="btn btn-outline-info rounded">View</a>
								}

							</td>
							<td scope="col">

								<div class="dropdown">
									<a class="btn btn-outline-info text-decoration-none" dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
										Action
									</a>
									<div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left" aria-labelledby="dropdownMenuButton">
											<a asp-action="ViewCase" asp-route-id="@item.RequestClientId" class="dropdown-item text-secondary">View Case</a>
											<a asp-action="ViewCase" asp-route-id="@item.RequestClientId" class="dropdown-item text-secondary">Chat</a>
											<a asp-action="ViewUploads" asp-route-id="@item.RequestId" class="dropdown-item text-secondary"> Documents</a>
									</div>
								</div>
							</td>

						</tr>
					}
				</tbody>
			</table>
		</div>
	</div>
